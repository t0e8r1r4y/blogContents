# Event Driven Architecture

## 정의
#### ED ( Event-driven )
- 이벤트를 생성, 발생하고 발행된 이벤트를 필요로하는 수신자에게 전송되는 구조
- 이벤트를 수신한 수신자가 이벤트를 처리하는 형태의 구조
- programming, architecture와 연결되어 다양한 정의로 표현됨

#### EDP ( Event-driven pattern )
- 특정 행동이 자송으로/순서에 따라 한 흐름으로  처리되는 것이 아닌 일에 대한 반응으로 동작하는 디자인 패턴
- 개인적으로 센서로부터 유입되는 `데이터 스트리밍 기반의 동작`을 처리하면서 해당 패턴을 반영한 경험이 있음
- 하나의 어플리케이션을 개발하는 관점에서 사용하는 패턴

#### EDA ( Event-driven architecture )
- 분산된 시스템 간에 이벤트를 생성, 발생하고 처리하는 구조
- 대게 Message Broker와 결합하여 시스템을 구성한다.
- Kafka를 많이 사용한다.

#### EDA의 구성요소
- Event Generator : 시스템 내,외부의 상태 변화를 감지하여 표준화된 형식의 이벤트를 생성
- Event Channel : 이벤트를 필요로 하는 시스템까지 발송
- Event Processing Engine : 수신한 이벤트를 식별, 적절한 처리를 함. 때에 따라 이벤트 처리의 결과로 또 다른 이벤트를 발생시킬 수 있다.

#### 이벤트 처리 스타일
- Simple Event Processing : 각각의 이벤트가 직접적으로 수행해야할 action과 매핑되어 처리 된다. 실시간으로 작업의 흐름을 처리할 때 사용되며, 이벤트 처리 시간과 비용의 손실이 적다.
- Event Stream Processing : 이벤트를 중요도에 따라 필터링하여 걸러진 이벤트만을 수신자에게 전송. 실시간으로 정보의 흐름을 처리할 때
- Complex Event Processing : 일상적인 이벤트의 패턴을 감지하여 더 복잡한 이벤트의 발생을 추론하는 것


<br/>
<br/>

## 장단점
#### 장점
- 디커플링 : 시스템간 느슨한 결합이 가능함으로 분산 시스템에서 시스템 간 의존성을 줄일 수 있다.
- 약속된 Event Message 기반으로 상호 정보를 교환하기에 타 시스템에 대해 알 필요가 없다.
- 서비스 단위로 시스템을 분리하기 때문에 확짱성과 탄력성이 좋다.


#### 단점
- 이벤트 브로커에 대한 의존성이 커진다. 메시지 브로커 장애 상황 시 전체 장애로 이어질 수 있다. 또한 브로커 서버를 잘 못띄우는 경우 데이터 흐름이 무너진다.
- Transaction 단위 격리되기 때문에 장애 발생시 retry/rollback을 고려해야 한다.
- 시스템 전체 Flow를 파악하기 어렵고 디버깅이 어렵다.


<br/>
<br/>
## EDA를 특징
- 멀티캐스트 통신 : 한개의 publisher는 다양한 Consumer에게 이벤트 송신가능
- 실시간 전송 : 실시간으로 발생하는 이벤트에 대한 처리가 가능
- 비동기 통신 : 비동기로 통신이 이루어지므로 publisher는 처리 결과를 기다릴 필요 없음
- 세밀한 통신 : 큰 이벤트보다 작기 때문에 세밀한 통신 관리가 된다.
- 이벤트 온톨로지 : 이벤트들은 확실하게 구분된 특징을 지니며 그에 상응하는 컨슈머에게 전달됩니다.
- 자유로운 배포 : 느슨한 결합도를 제공하므로 새로운 서비스의 배포가 자유롭습니다.
